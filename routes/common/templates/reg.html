{% extends "base.html" %}
{% block base_title %}Registration{% endblock %}

{% block base_head %}

    {{ super() }}

    <link rel="stylesheet" type="text/css" href="/static/common/css/reg.css">

    <style>
        .main-title {
            text-align: center !important;
        }

        .col-sm-6 {
            padding-bottom: 0 !important;
        }

        .md-form .form-control {
            margin-bottom: 0;
        }

        .md-form.md-outline {
            margin-top: 0.5rem !important;
        }

        .form-group i.fas.fa-lock {
            position: absolute;
            right: 10px;
            bottom: 6.5px;
        }

        input[type="password"] {
            padding-right: 40px !important;
        }

    </style>
{% endblock %}

{% block mainTitle %}
    <div class="text-center" id="content-header">
        <p class="primary-lg" id="account-holder">Be Awesome. Become a Member!</p>
    </div>
{% endblock %}
<!-- Page Content -->
{% block main %}

    <div class="container" id="acctContainer">
        <div class="rounded shadow-lg card p-5" id="acctCard">
            <div class="card-body">
                <h4 class="card-title text-center primary-md pb-4">Registration</h4>
                {% with invalid_reg = get_flashed_messages() %}
                    {% if invalid_reg %}
                        <p class="flashes complement h5 text-center" style="color: red;">
                            {% for msg in invalid_reg %}
                                {{ msg }}
                            {% endfor %}
                        </p>
                    {% endif %}
                {% endwith %}
                <form id="regForm" class="registration-form" method="POST" autocomplete="off">
                    <div class="form-row">
                        <div class="col-sm-6">
                            <div class="form-group md-form md-outline">
                                <input type="text" id="inputFirstName" class="form-control" maxlength="45"
                                       name="inputFirstName" data-error="First Name must me more than one character"
                                       required>
                                <label for="inputFirstName">First Name</label>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group md-form md-outline">
                                <input type="text" id="inputLastName" class="form-control" maxlength="45"
                                       name="inputLastName" data-error="Last Name must me more than two characters"
                                       required>
                                <label for="inputLastName">Last Name</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="col-sm-12">
                            <div class="form-group md-form md-outline">
                                <input type="email" id="inputEmail" class="form-control" maxlength="255"
                                       name="inputEmail" data-error="Email is invalid" required>
                                <label for="inputEmail">Email address</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="col-sm-12">
                            <div class="form-group md-form md-outline">
                                <label for="inputPassword">Password</label>
                                <input type="password" id="inputPassword" class="form-control"
                                       name="inputPassword" maxlength="50"
                                       data-error="Password must be more than 8 or more characters long, contain at least 1 uppercase character, 1 lowercase character, and 1 number."
                                       required>
                                <i class="fas fa-lock prefix"></i>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="col-sm-12">
                            <div class="form-group md-form md-outline">
                                <label for="inputConfirmPassword">Confirm Password</label>
                                <input type="password" id="inputConfirmPassword" class="form-control" maxlength="50"
                                       name="inputConfirmPassword" data-error="Password's do not match" required>
                                <i class="fas fa-lock prefix"></i>
                            </div>
                        </div>
                    </div>

                    <!--NOT FORM RELATED ITEMS-->
                    <p class="hori-line">
                        <span class="text-muted font-weight-light font-italic">Optional</span>
                    </p>


                    <div class="checkbox-holder mb-3">
                        <div class="custom-control custom-checkbox d-inline">
                            <input type="checkbox" class="custom-control-input" data-toggle="collapse"
                                   data-target="#addressInfo" id="addressToggler">
                            <label class="custom-control-label" for="addressToggler">Add Shipping Address</label>
                        </div>
                    </div>

                    <div class="checkbox-holder mb-3">
                        <div class="custom-control custom-checkbox d-inline">
                            <input type="checkbox" class="custom-control-input" data-toggle="collapse"
                                   data-target="#paymentInfo" id="paymentToggler">
                            <label class="custom-control-label" for="paymentToggler">Add Payment Method</label>
                        </div>
                    </div>
                    <!--END -- NOT FORM RELATED ITEMS-->

                    <div class="addr-opt">
                        <div id="addressInfo" class="collapse">
                            <div class="form-row">
                                <div class="col-sm-12">
                                    <div class="form-group md-form md-outline">
                                        <input type="text" class="form-control" id="addAddressStreetAddress"
                                               name="addAddressStreetAddress" maxlength="45"
                                               data-error="Street Address cannot be empty">
                                        <label for="addAddressStreetAddress">Street Address</label>
                                    </div>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="col">
                                    <div class="form-group md-form md-outline">
                                        <input type="text" class="form-control valid" id="addAddressApartmentOrSuite"
                                               name="addAddressApartmentOrSuite" aria-invalid="false" maxlength="45"
                                               data-success="This field is optional">
                                        <label for="addAddressApartmentOrSuite">Apartment or Suite (Optional)</label>
                                    </div>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="col">
                                    <div class="form-group md-form md-outline">
                                        <input type="text" class="form-control" id="addZipcode" maxlength="10"
                                               name="addZipcode" data-error="ZIP or Postal code is not valid">
                                        <label for="addZipcode">ZIP or Postal code</label>
                                    </div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="col-md-6">
                                    <div class="form-group md-form md-outline">
                                        <label for="addAddressCity">City</label>
                                        <input type="text" class="form-control" id="addAddressCity" maxlength="45"
                                               name="addAddressCity">
                                    </div>
                                </div>
                                <div class="col-md-3" style="margin-top: 8px">
                                    <div class="form-group">
                                        <label for="addAddressState" class="d-none">State</label>
                                        <select id="addAddressState" class="form-control" name="addAddressState">
                                            <option value="" disabled selected>State</option>
                                            <option value="GA">GA</option>
                                            <option value="CA">CA</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-3" style="margin-top: 8px">
                                    <div class="form-group">
                                        <label for="addAddressCountry" class="d-none">Country</label>
                                        <select id="addAddressCountry" class="form-control" name="addAddressCountry">
                                            <option value="" disabled selected>Country</option>
                                            <option value="United States">United States</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="form-group payment-opt">
                        <div id="paymentInfo" class="collapse">
                            <small>
                                <p class="text-muted font-italic">Credit card information</p>
                            </small>
                            <div class="card-specific">
                                <div class="form-row">
                                    <div class="col-sm-6">
                                        <div class="form-group md-form md-outline">
                                            <input type="text" class="form-control" id="cardHolderFirstName"
                                                   name="cardHolderFirstName"
                                                   style="text-transform: uppercase;" maxlength="45"
                                                   data-error="First Name must me more than one character">
                                            <label for="cardHolderFirstName">First Name on Card</label>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group md-form md-outline">
                                            <input type="text" class="form-control" id="cardHolderLastName"
                                                   name="cardHolderLastName"
                                                   style="text-transform: uppercase;" maxlength="45"
                                                   data-error="Last Name must me more than two characters">
                                            <label for="cardHolderLastName">Last Name on Card</label>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="col-sm-10">
                                        <div class="form-group md-form md-outline">
                                            <div id="billingInputContainer">
                                                <label for="ccn">Credit Card Number</label>
                                                <input type="text" class="form-control" id="ccn" name="ccn"
                                                       credit-provider=""
                                                       data-error="Credit Card is not valid.">
                                            </div>

                                        </div>
                                    </div>
                                    <div class="col-sm-2">
                                        <div class="form-group md-form md-outline">
                                            <input type="text" class="form-control" id="cvv" name="cvv"
                                                   data-error="CVV is not valid.">
                                            <label for="cvv">CVV</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="col">
                                        <div class="form-group">
                                            <label for="ccexp">Credit Card Expiration Date</label>
                                            <input type="month" class="form-control" id="ccexp"
                                                   name="ccexp" pattern="[0-9]{4}-[0-9]{2}">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <small>
                                <p class="text-muted font-italic">Billing Address</p>
                            </small>
                            <div class="billing-address">
                                <div class="form-row">
                                    <div class="col">
                                        <div class="form-group md-form md-outline">
                                            <label for="billingStreetAddress">Street Address</label>
                                            <input type="text" class="form-control" id="billingStreetAddress"
                                                   name="billingStreetAddress" maxlength="45"
                                                   data-error="Street Address cannot be empty">
                                        </div>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="col">
                                        <div class="form-group md-form md-outline">
                                            <label for="billingApartmentOrSuite">Apartment or Suite (Optional)</label>
                                            <input type="text" class="form-control valid" maxlength="45"
                                                   id="billingApartmentOrSuite" aria-invalid="false"
                                                   name="billingApartmentOrSuite" data-success="This field is optional">
                                        </div>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="col">
                                        <div class="form-group md-form md-outline">
                                            <label for="billingZipcode">ZIP or Postal code</label>
                                            <input type="text" class="form-control" id="billingZipcode" maxlength="10"
                                                   name="billingZipcode" data-error="ZIP or Postal code is not valid">
                                        </div>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="col-md-6">
                                        <div class="form-group md-form md-outline">
                                            <label for="billingCity">City</label>
                                            <input type="text" class="form-control" id="billingCity" maxlength="45"
                                                   name="billingCity">
                                        </div>
                                    </div>
                                    <div class="col-md-3" style="margin-top: 8px">
                                        <div class="form-group">
                                            <label for="billingState" class="d-none">State</label>
                                            <select id="billingState" class="form-control" name="billingState">
                                                <option value="" disabled selected>State</option>
                                                <option value="GA">GA</option>
                                                <option value="CA">CA</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-3" style="margin-top: 8px">
                                        <div class="form-group">
                                            <label for="billingCountry" class="d-none">Country</label>
                                            <select id="billingCountry" class="form-control" name="billingCountry">
                                                <option value="" disabled selected>Country</option>
                                                <option value="United States">United States</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-lg blue-gradient btn-block mt-4" id="registerBtn" type="submit">Register
                    </button>
                </form>
            </div>
        </div>
    </div>

    <button class="btn blue-gradient waves-light my-button" title="Register"><i
            class="fas fa-angle-down fa-2x"></i></button>
    <script>
        $(".my-button").click(function () {
            $(function () {
                let target = $('#acctContainer');
                if (target.length) {
                    $('html, body').animate({
                        scrollTop: target.offset().top - 45
                    }, 200);
                    return false;
                }
            });
            $("#inputFirstName").focus();
        });
    </script>
    <script>
        $(function () {
            let now = new Date();
            let minMonth = ("0" + (now.getMonth() + 1)).slice(-2);
            $("#ccexp").attr("min", `${now.getFullYear()}-${minMonth}`)
        });

        window.onbeforeunload = function () {
            $("#addressToggler, #paymentToggler").prop('checked', false);
            $(document).scrollTop(0);
        }
    </script>
    <script defer src="/static/common/js/registration/regform.js" type="module"></script>

{% endblock %}